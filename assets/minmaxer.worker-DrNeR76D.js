var U=Object.defineProperty;var W=(i,h,l)=>h in i?U(i,h,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[h]=l;var L=(i,h,l)=>W(i,typeof h!="symbol"?h+"":h,l);(function(){"use strict";var i=(n=>(n[n.AntiGravity=0]="AntiGravity",n[n.Athletic=1]="Athletic",n[n.Balding=2]="Balding",n[n.BrightEyed=3]="BrightEyed",n[n.Calming=4]="Calming",n[n.CalorieDense=5]="CalorieDense",n[n.Cyclopean=6]="Cyclopean",n[n.Disorienting=7]="Disorienting",n[n.Electrifying=8]="Electrifying",n[n.Energizing=9]="Energizing",n[n.Euphoric=10]="Euphoric",n[n.Explosive=11]="Explosive",n[n.Focused=12]="Focused",n[n.Foggy=13]="Foggy",n[n.Gingeritis=14]="Gingeritis",n[n.Glowing=15]="Glowing",n[n.Jennerising=16]="Jennerising",n[n.Laxative=17]="Laxative",n[n.LongFaced=18]="LongFaced",n[n.Munchies=19]="Munchies",n[n.Paranoia=20]="Paranoia",n[n.Refreshing=21]="Refreshing",n[n.Schizophrenia=22]="Schizophrenia",n[n.Sedating=23]="Sedating",n[n.SeizureInducing=24]="SeizureInducing",n[n.Shrinking=25]="Shrinking",n[n.Slippery=26]="Slippery",n[n.Smelly=27]="Smelly",n[n.Sneaky=28]="Sneaky",n[n.Spicy=29]="Spicy",n[n.ThoughtProvoking=30]="ThoughtProvoking",n[n.Toxic=31]="Toxic",n[n.TropicThunder=32]="TropicThunder",n[n.Zombifying=33]="Zombifying",n))(i||{});const h=Object.keys(i).filter(n=>isNaN(+n)),l=[.54,.32,.3,.4,.1,.28,.56,0,.5,.22,.18,0,.16,.36,.2,.48,.42,0,.52,.12,0,.14,0,.26,0,.6,.34,0,.24,.38,.44,0,.46,.58],I=[{name:"OG Kush",initial:[i.Calming],price:35},{name:"Sour Diesel",initial:[i.Refreshing],price:35},{name:"Green Crack",initial:[i.Energizing],price:35},{name:"Grandaddy Purple",initial:[i.Sedating],price:35},{name:"Meth",initial:[],price:70},{name:"Coke",initial:[],price:150}],G=[{name:"Addy",effect:i.ThoughtProvoking,conditions:[{if:i.Explosive,then:i.Euphoric},{if:i.Foggy,then:i.Energizing},{if:i.Glowing,then:i.Refreshing},{if:i.LongFaced,then:i.Electrifying},{if:i.Sedating,then:i.Gingeritis}],cost:7},{name:"Banana",effect:i.Gingeritis,conditions:[{if:i.Calming,then:i.Sneaky},{if:i.Energizing,then:i.ThoughtProvoking},{if:i.Cyclopean,then:i.Energizing},{if:i.Focused,then:i.SeizureInducing},{if:i.Disorienting,then:i.Focused},{if:i.LongFaced,then:i.Refreshing},{if:i.Paranoia,then:i.Jennerising},{if:i.Smelly,then:i.AntiGravity},{if:i.Toxic,then:i.Smelly}],cost:2},{name:"Battery",effect:i.BrightEyed,conditions:[{if:i.Cyclopean,then:i.Glowing},{if:i.Euphoric,then:i.Zombifying},{if:i.Electrifying,then:i.Euphoric},{if:i.Laxative,then:i.CalorieDense},{if:i.Munchies,then:i.TropicThunder},{if:i.Shrinking,then:i.Munchies}],cost:8},{name:"Chili",effect:i.Spicy,conditions:[{if:i.AntiGravity,then:i.TropicThunder},{if:i.Athletic,then:i.Euphoric},{if:i.Laxative,then:i.LongFaced},{if:i.Munchies,then:i.Toxic},{if:i.Shrinking,then:i.Refreshing},{if:i.Sneaky,then:i.BrightEyed}],cost:7},{name:"Cuke",effect:i.Energizing,conditions:[{if:i.Euphoric,then:i.Laxative},{if:i.Foggy,then:i.Cyclopean},{if:i.Gingeritis,then:i.ThoughtProvoking},{if:i.Munchies,then:i.Athletic},{if:i.Slippery,then:i.Munchies},{if:i.Sneaky,then:i.Paranoia},{if:i.Toxic,then:i.Euphoric}],cost:2},{name:"Donut",effect:i.CalorieDense,conditions:[{if:i.AntiGravity,then:i.Slippery},{if:i.Balding,then:i.Sneaky},{if:i.CalorieDense,then:i.Explosive},{if:i.Focused,then:i.Euphoric},{if:i.Jennerising,then:i.Gingeritis},{if:i.Munchies,then:i.Calming},{if:i.Shrinking,then:i.Energizing}],cost:3},{name:"Energy Drink",effect:i.Athletic,conditions:[{if:i.Disorienting,then:i.Electrifying},{if:i.Euphoric,then:i.Energizing},{if:i.Focused,then:i.Shrinking},{if:i.Foggy,then:i.Laxative},{if:i.Glowing,then:i.Disorienting},{if:i.Schizophrenia,then:i.Balding},{if:i.Sedating,then:i.Munchies},{if:i.Spicy,then:i.Euphoric},{if:i.TropicThunder,then:i.Sneaky}],cost:6},{name:"Flu Medicine",effect:i.Sedating,conditions:[{if:i.Munchies,then:i.Slippery},{if:i.Athletic,then:i.Munchies},{if:i.Calming,then:i.BrightEyed},{if:i.Cyclopean,then:i.Foggy},{if:i.Electrifying,then:i.Refreshing},{if:i.Euphoric,then:i.Toxic},{if:i.Focused,then:i.Calming},{if:i.Laxative,then:i.Euphoric},{if:i.Shrinking,then:i.Paranoia},{if:i.ThoughtProvoking,then:i.Gingeritis}],cost:5},{name:"Gasoline",effect:i.Toxic,conditions:[{if:i.Disorienting,then:i.Glowing},{if:i.Electrifying,then:i.Disorienting},{if:i.Euphoric,then:i.Spicy},{if:i.Energizing,then:i.Euphoric},{if:i.Gingeritis,then:i.Smelly},{if:i.Sneaky,then:i.TropicThunder},{if:i.Jennerising,then:i.Sneaky},{if:i.Laxative,then:i.Foggy},{if:i.Munchies,then:i.Sedating},{if:i.Paranoia,then:i.Calming},{if:i.Shrinking,then:i.Focused}],cost:5},{name:"Horse Semen",effect:i.LongFaced,conditions:[{if:i.AntiGravity,then:i.Calming},{if:i.Gingeritis,then:i.Refreshing},{if:i.SeizureInducing,then:i.Energizing},{if:i.ThoughtProvoking,then:i.Electrifying}],cost:9},{name:"Iodine",effect:i.Jennerising,conditions:[{if:i.Calming,then:i.Balding},{if:i.CalorieDense,then:i.Gingeritis},{if:i.Euphoric,then:i.SeizureInducing},{if:i.Foggy,then:i.Paranoia},{if:i.Refreshing,then:i.ThoughtProvoking},{if:i.Toxic,then:i.Sneaky}],cost:8},{name:"Mega Bean",effect:i.Foggy,conditions:[{if:i.Athletic,then:i.Laxative},{if:i.Calming,then:i.Glowing},{if:i.Energizing,then:i.Cyclopean},{if:i.Focused,then:i.Disorienting},{if:i.Jennerising,then:i.Paranoia},{if:i.SeizureInducing,then:i.Focused},{if:i.Shrinking,then:i.Electrifying},{if:i.Slippery,then:i.Toxic},{if:i.Sneaky,then:i.Calming},{if:i.ThoughtProvoking,then:i.Energizing}],cost:7},{name:"Motor Oil",effect:i.Slippery,conditions:[{if:i.Munchies,then:i.Schizophrenia},{if:i.Energizing,then:i.Munchies},{if:i.Euphoric,then:i.Sedating},{if:i.Foggy,then:i.Toxic},{if:i.Paranoia,then:i.AntiGravity}],cost:6},{name:"Mouth Wash",effect:i.Balding,conditions:[{if:i.Calming,then:i.AntiGravity},{if:i.CalorieDense,then:i.Sneaky},{if:i.Explosive,then:i.Sedating},{if:i.Focused,then:i.Jennerising}],cost:4},{name:"Paracetamol",effect:i.Sneaky,conditions:[{if:i.Calming,then:i.Slippery},{if:i.Electrifying,then:i.Athletic},{if:i.Paranoia,then:i.Balding},{if:i.Energizing,then:i.Paranoia},{if:i.Focused,then:i.Gingeritis},{if:i.Foggy,then:i.Calming},{if:i.Toxic,then:i.TropicThunder},{if:i.Glowing,then:i.Toxic},{if:i.Munchies,then:i.AntiGravity},{if:i.Spicy,then:i.BrightEyed}],cost:3},{name:"Viagra",effect:i.TropicThunder,conditions:[{if:i.Athletic,then:i.Sneaky},{if:i.Disorienting,then:i.Toxic},{if:i.Euphoric,then:i.BrightEyed},{if:i.Laxative,then:i.Calming},{if:i.Shrinking,then:i.Gingeritis}],cost:4}],f={};h.forEach((n,e)=>{f[i[n]]=1n<<BigInt(e)});const m=G.map(n=>({name:n.name,mainMask:1n<<BigInt(n.effect),condMasks:n.conditions.map(e=>[1n<<BigInt(e.if),1n<<BigInt(e.then)]),cost:n.cost}));[...m].map((n,e)=>({value:e.toString(),label:n.name})),G.reduce((n,e,t)=>(n[e.name]=t,n),{});function V(n){let e=0;for(;n;)n&=n-1n,e++;return e}function R(n,e){let t=n;for(const[a,o]of e.condMasks)(t&a)!==0n&&(t&o)===0n&&(t=t&~a|o);return(t&e.mainMask)===0n&&V(t)<8&&(t|=e.mainMask),t}function z(n){const e=h.findIndex((t,a)=>f[i[t]]===n);return e>=0?h[e]:"Unknown"}m.map((n,e)=>{const t=n.condMasks.map(([a,o])=>({remove:z(a),add:z(o)}));return t.push({add:n.name}),{value:e.toString(),label:n.name,changes:t}});const F=I.map(n=>{const e=n.initial.reduce((t,a)=>t|1n<<BigInt(a),0n);return{name:n.name,mask:e,baseValue:n.price}});class J{constructor(e){L(this,"data",[]);this.cmp=e}push(e){this.data.push(e);let t=this.data.length-1;for(;t>0;){const a=t-1>>1;if(this.cmp(this.data[t],this.data[a])>=0)break;[this.data[t],this.data[a]]=[this.data[a],this.data[t]],t=a}}pop(){if(!this.data.length)return;const e=this.data[0],t=this.data.pop();if(this.data.length){this.data[0]=t;let a=0;for(;;){let o=2*a+1;if(o>=this.data.length||(o+1<this.data.length&&this.cmp(this.data[o+1],this.data[o])<0&&o++,this.cmp(this.data[o],this.data[a])>=0))break;[this.data[a],this.data[o]]=[this.data[o],this.data[a]],a=o}}return e}peek(){return this.data[0]}get size(){return this.data.length}}let k=!1;self.addEventListener("message",n=>{const e=n.data;if(e.type==="cancel"){k=!0;return}if(e.type==="start"){k=!1;const{desiredEffects:t,excludedEffects:a,baseIdx:o,maxIngredients:N}=e,O=F[o].mask,q=F[o].baseValue,Z=N??8,B=t.reduce((r,c)=>r|f[c],0n),H=a.reduce((r,c)=>r|f[c],0n),g=new J((r,c)=>r.profit-c.profit),P=10,A=new Map,x=[{mask:O,seq:[],sumVal:0}];let D=!1;for(;x.length&&!k;){const{mask:r,seq:c,sumVal:j}=x.pop();if((r&H)!==0n)continue;const b=c.length,w=t.length===0,K=(r&B)===B;if(w&&b>0||!w&&K){D=!0;const y=h.filter((s,p)=>(r&f[i[s]])!==0n);let d=0;for(let s=0;s<h.length;s++)(r&f[i[h[s]]])!==0n&&(d+=l[s]);const v=q*(1+d),u=c.reduce((s,p)=>s+m[p].cost,0),T=v-u,S={baseIdx:o,seq:c,effects:y,totalValue:v,cost:u,profit:T};if(g.size<P||S.profit>g.peek().profit){g.push(S),g.size>P&&g.pop();const s=[],p=[];for(;g.size;)p.push(g.pop());for(let M=p.length-1;M>=0;M--)s.push(p[M]),g.push(p[M]);self.postMessage({type:"update",results:s})}}if(!(b>=Z))for(let y=0;y<m.length;y++){const d=R(r,m[y]);if(d===r)continue;const v=d&~r;let u=j;for(let s=0;s<h.length;s++)(v>>BigInt(s)&1n)!==0n&&(u+=l[s]);const T=d.toString(),S=A.get(T);S!==void 0&&S>=u||(A.set(T,u),x.push({mask:d,seq:[...c,y],sumVal:u}))}}if(!k&&!D&&t.length>0){self.postMessage({type:"impossible"});return}const C=[];for(;g.size;)C.push(g.pop());C.reverse(),self.postMessage({type:"done",results:C})}})})();
