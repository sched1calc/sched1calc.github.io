var O=Object.defineProperty;var Z=(i,s,d)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[s]=d;var L=(i,s,d)=>Z(i,typeof s!="symbol"?s+"":s,d);(function(){"use strict";var i=(n=>(n[n.AntiGravity=0]="AntiGravity",n[n.Athletic=1]="Athletic",n[n.Balding=2]="Balding",n[n.BrightEyed=3]="BrightEyed",n[n.Calming=4]="Calming",n[n.CalorieDense=5]="CalorieDense",n[n.Cyclopean=6]="Cyclopean",n[n.Disorienting=7]="Disorienting",n[n.Electrifying=8]="Electrifying",n[n.Energizing=9]="Energizing",n[n.Euphoric=10]="Euphoric",n[n.Explosive=11]="Explosive",n[n.Focused=12]="Focused",n[n.Foggy=13]="Foggy",n[n.Gingeritis=14]="Gingeritis",n[n.Glowing=15]="Glowing",n[n.Jennerising=16]="Jennerising",n[n.Laxative=17]="Laxative",n[n.LongFaced=18]="LongFaced",n[n.Munchies=19]="Munchies",n[n.Paranoia=20]="Paranoia",n[n.Refreshing=21]="Refreshing",n[n.Schizophrenia=22]="Schizophrenia",n[n.Sedating=23]="Sedating",n[n.SeizureInducing=24]="SeizureInducing",n[n.Shrinking=25]="Shrinking",n[n.Slippery=26]="Slippery",n[n.Smelly=27]="Smelly",n[n.Sneaky=28]="Sneaky",n[n.Spicy=29]="Spicy",n[n.ThoughtProvoking=30]="ThoughtProvoking",n[n.Toxic=31]="Toxic",n[n.TropicThunder=32]="TropicThunder",n[n.Zombifying=33]="Zombifying",n))(i||{});const s=Object.keys(i).filter(n=>isNaN(+n)),d=[.54,.32,.3,.4,.1,.28,.56,0,.5,.22,.18,0,.16,.36,.2,.48,.42,0,.52,.12,0,.14,0,.26,0,.6,.34,0,.24,.38,.44,0,.46,.58],b=[{name:"OG Kush",initial:[i.Calming],price:35},{name:"Sour Diesel",initial:[i.Refreshing],price:35},{name:"Green Crack",initial:[i.Energizing],price:35},{name:"Grandaddy Purple",initial:[i.Sedating],price:35},{name:"Meth",initial:[],price:70},{name:"Coke",initial:[],price:150}],M=[{name:"Addy",effect:i.ThoughtProvoking,conditions:[{if:i.Explosive,then:i.Euphoric},{if:i.Foggy,then:i.Energizing},{if:i.Glowing,then:i.Refreshing},{if:i.LongFaced,then:i.Electrifying},{if:i.Sedating,then:i.Gingeritis}],cost:7},{name:"Banana",effect:i.Gingeritis,conditions:[{if:i.Calming,then:i.Sneaky},{if:i.Cyclopean,then:i.Energizing},{if:i.Disorienting,then:i.Focused},{if:i.Energizing,then:i.ThoughtProvoking},{if:i.Focused,then:i.SeizureInducing},{if:i.LongFaced,then:i.Refreshing},{if:i.Paranoia,then:i.Jennerising},{if:i.Smelly,then:i.AntiGravity},{if:i.Toxic,then:i.Smelly}],cost:2},{name:"Battery",effect:i.BrightEyed,conditions:[{if:i.Cyclopean,then:i.Glowing},{if:i.Electrifying,then:i.Euphoric},{if:i.Euphoric,then:i.Zombifying},{if:i.Laxative,then:i.CalorieDense},{if:i.Munchies,then:i.TropicThunder},{if:i.Shrinking,then:i.Munchies}],cost:8},{name:"Chili",effect:i.Spicy,conditions:[{if:i.AntiGravity,then:i.TropicThunder},{if:i.Athletic,then:i.Euphoric},{if:i.Laxative,then:i.LongFaced},{if:i.Munchies,then:i.Toxic},{if:i.Shrinking,then:i.Refreshing},{if:i.Sneaky,then:i.BrightEyed}],cost:7},{name:"Cuke",effect:i.Energizing,conditions:[{if:i.Euphoric,then:i.Laxative},{if:i.Foggy,then:i.Cyclopean},{if:i.Gingeritis,then:i.ThoughtProvoking},{if:i.Munchies,then:i.Athletic},{if:i.Slippery,then:i.Munchies},{if:i.Slippery,then:i.Athletic},{if:i.Sneaky,then:i.Paranoia},{if:i.Toxic,then:i.Euphoric}],cost:2},{name:"Donut",effect:i.CalorieDense,conditions:[{if:i.AntiGravity,then:i.Slippery},{if:i.Balding,then:i.Sneaky},{if:i.CalorieDense,then:i.Explosive},{if:i.Focused,then:i.Euphoric},{if:i.Jennerising,then:i.Gingeritis},{if:i.Munchies,then:i.Calming},{if:i.Shrinking,then:i.Energizing}],cost:3},{name:"Energy Drink",effect:i.Athletic,conditions:[{if:i.Disorienting,then:i.Electrifying},{if:i.Euphoric,then:i.Energizing},{if:i.Focused,then:i.Shrinking},{if:i.Foggy,then:i.Laxative},{if:i.Glowing,then:i.Disorienting},{if:i.Schizophrenia,then:i.Balding},{if:i.Sedating,then:i.Munchies},{if:i.Spicy,then:i.Euphoric},{if:i.TropicThunder,then:i.Sneaky}],cost:6},{name:"Flu Medicine",effect:i.Sedating,conditions:[{if:i.Athletic,then:i.Munchies},{if:i.Calming,then:i.BrightEyed},{if:i.Cyclopean,then:i.Foggy},{if:i.Electrifying,then:i.Refreshing},{if:i.Euphoric,then:i.Toxic},{if:i.Focused,then:i.Calming},{if:i.Laxative,then:i.Euphoric},{if:i.Munchies,then:i.Slippery},{if:i.Shrinking,then:i.Paranoia},{if:i.ThoughtProvoking,then:i.Gingeritis}],cost:5},{name:"Gasoline",effect:i.Toxic,conditions:[{if:i.Disorienting,then:i.Glowing},{if:i.Electrifying,then:i.Disorienting},{if:i.Energizing,then:i.Euphoric},{if:i.Euphoric,then:i.Spicy},{if:i.Gingeritis,then:i.Smelly},{if:i.Jennerising,then:i.Sneaky},{if:i.Laxative,then:i.Foggy},{if:i.Munchies,then:i.Sedating},{if:i.Paranoia,then:i.Calming},{if:i.Shrinking,then:i.Focused},{if:i.Sneaky,then:i.TropicThunder}],cost:5},{name:"Horse Semen",effect:i.LongFaced,conditions:[{if:i.AntiGravity,then:i.Calming},{if:i.Gingeritis,then:i.Refreshing},{if:i.SeizureInducing,then:i.Energizing},{if:i.ThoughtProvoking,then:i.Electrifying}],cost:9},{name:"Iodine",effect:i.Jennerising,conditions:[{if:i.Calming,then:i.Balding},{if:i.CalorieDense,then:i.Gingeritis},{if:i.Euphoric,then:i.SeizureInducing},{if:i.Foggy,then:i.Paranoia},{if:i.Refreshing,then:i.ThoughtProvoking},{if:i.Toxic,then:i.Sneaky}],cost:8},{name:"Mega Bean",effect:i.Foggy,conditions:[{if:i.Athletic,then:i.Laxative},{if:i.Calming,then:i.Glowing},{if:i.Energizing,then:i.Cyclopean},{if:i.Focused,then:i.Disorienting},{if:i.Jennerising,then:i.Paranoia},{if:i.SeizureInducing,then:i.Focused},{if:i.Shrinking,then:i.Electrifying},{if:i.Slippery,then:i.Toxic},{if:i.Sneaky,then:i.Calming},{if:i.ThoughtProvoking,then:i.Energizing}],cost:7},{name:"Motor Oil",effect:i.Slippery,conditions:[{if:i.Energizing,then:i.Munchies},{if:i.Euphoric,then:i.Sedating},{if:i.Foggy,then:i.Toxic},{if:i.Munchies,then:i.Schizophrenia},{if:i.Paranoia,then:i.AntiGravity},{if:i.Energizing,then:i.Schizophrenia}],cost:6},{name:"Mouth Wash",effect:i.Balding,conditions:[{if:i.Calming,then:i.AntiGravity},{if:i.CalorieDense,then:i.Sneaky},{if:i.Explosive,then:i.Sedating},{if:i.Focused,then:i.Jennerising}],cost:4},{name:"Paracetamol",effect:i.Sneaky,conditions:[{if:i.Calming,then:i.Slippery},{if:i.Electrifying,then:i.Athletic},{if:i.Energizing,then:i.Paranoia},{if:i.Focused,then:i.Gingeritis},{if:i.Foggy,then:i.Calming},{if:i.Glowing,then:i.Toxic},{if:i.Munchies,then:i.AntiGravity},{if:i.Paranoia,then:i.Balding},{if:i.Spicy,then:i.BrightEyed},{if:i.Toxic,then:i.TropicThunder}],cost:3},{name:"Viagra",effect:i.TropicThunder,conditions:[{if:i.Athletic,then:i.Sneaky},{if:i.Disorienting,then:i.Toxic},{if:i.Euphoric,then:i.BrightEyed},{if:i.Laxative,then:i.Calming},{if:i.Shrinking,then:i.Gingeritis}],cost:4}],v={};s.forEach((n,e)=>{v[i[n]]=1n<<BigInt(e)});const m=M.map(n=>({name:n.name,mainMask:1n<<BigInt(n.effect),condMasks:n.conditions.map(e=>[1n<<BigInt(e.if),1n<<BigInt(e.then)]),cost:n.cost}));[...m].map((n,e)=>({value:e.toString(),label:n.name})),M.reduce((n,e,t)=>(n[e.name]=t,n),{});function I(n){let e=0;for(;n;)n&=n-1n,e++;return e}function V(n,e){let t=n;for(const[a,o]of e.condMasks)(t&a)!==0n&&(t&o)===0n&&(t=t&~a|o);return(t&e.mainMask)===0n&&I(t)<8&&(t|=e.mainMask),t}const z=b.map(n=>{const e=n.initial.reduce((t,a)=>t|1n<<BigInt(a),0n);return{name:n.name,mask:e,baseValue:n.price}});class R{constructor(e){L(this,"data",[]);this.cmp=e}push(e){this.data.push(e);let t=this.data.length-1;for(;t>0;){const a=t-1>>1;if(this.cmp(this.data[t],this.data[a])>=0)break;[this.data[t],this.data[a]]=[this.data[a],this.data[t]],t=a}}pop(){if(!this.data.length)return;const e=this.data[0],t=this.data.pop();if(this.data.length){this.data[0]=t;let a=0;for(;;){let o=2*a+1;if(o>=this.data.length||(o+1<this.data.length&&this.cmp(this.data[o+1],this.data[o])<0&&o++,this.cmp(this.data[o],this.data[a])>=0))break;[this.data[a],this.data[o]]=[this.data[o],this.data[a]],a=o}}return e}peek(){return this.data[0]}get size(){return this.data.length}}let T=!1;self.addEventListener("message",n=>{const e=n.data;if(e.type==="cancel"){T=!0;return}if(e.type==="start"){T=!1;const{desiredEffects:t,baseIdx:a,maxIngredients:o}=e,J=z[a].mask,N=z[a].baseValue,x=o??8,F=t.reduce((g,l)=>g|v[l],0n);console.log(e,x);const r=new R((g,l)=>g.profit-l.profit),B=10,P=new Map,C=[{mask:J,seq:[],sumVal:0}];for(;C.length&&!T;){const{mask:g,seq:l,sumVal:A}=C.pop(),D=l.length,w=t.length===0,q=(g&F)===F;if(w&&D>0||!w&&q){const u=s.filter((c,h)=>(g&v[i[c]])!==0n),p=N*(1+A),S=l.reduce((c,h)=>c+m[h].cost,0),y=p-S,f={baseIdx:a,seq:l,effects:u,totalValue:p,cost:S,profit:y};if(r.size<B||f.profit>r.peek().profit){r.push(f),r.size>B&&r.pop();const c=[],h=[];for(;r.size;)h.push(r.pop());for(let k=h.length-1;k>=0;k--)c.push(h[k]),r.push(h[k]);self.postMessage({type:"update",results:c})}}if(!(D>=x))for(let u=0;u<m.length;u++){const p=V(g,m[u]);if(p===g)continue;const S=p&~g;let y=A;for(let h=0;h<s.length;h++)(S>>BigInt(h)&1n)!==0n&&(y+=d[h]);const f=p.toString(),c=P.get(f);c!==void 0&&c>=y||(P.set(f,y),C.push({mask:p,seq:[...l,u],sumVal:y}))}}const G=[];for(;r.size;)G.push(r.pop());G.reverse(),self.postMessage({type:"done",results:G})}})})();
