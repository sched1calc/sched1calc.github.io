import{g as Se,$ as Z,s as K,B as $,A as ee,z as Pe,a0 as H,a1 as Re,j as Q,l as X,t as oe,a2 as be,U as we,y as se,a3 as Ie,a4 as me,H as J,a5 as Be,a6 as Ne,u as Te,X as q,a7 as Ee,a8 as Me,N as D,a9 as Ve,Z as ue,Y as L,aa as Ae,ab as ze,ac as de,O as fe,K as U,ad as Ge,P as We,S as $e,Q as Fe,R as Y,J as De,T as pe,ae as he,af as Oe,W as qe,_ as Le,w as Ue}from"./mixResult-DgmZ3aWk.js";import{b as f,q as s}from"./index-BEAhMyTn.js";function te({color:e,theme:o,autoContrast:t}){return(typeof t=="boolean"?t:o.autoContrast)&&Z({color:e||o.primaryColor,theme:o}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function fo(e,o){return te({color:e.colors[e.primaryColor][Se(e,o)],theme:e,autoContrast:null})}function xe(e,o){return typeof e=="boolean"?e:o.autoContrast}var Ce={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const He=Ce,ye=f.forwardRef(({__staticSelector:e,__stylesApiProps:o,className:t,classNames:u,styles:b,unstyled:p,children:i,label:c,description:C,id:I,disabled:m,error:B,size:y,labelPosition:j="left",bodyElement:x="div",labelElement:v="label",variant:M,style:V,vars:S,mod:N,...P},R)=>{const k=K({name:e,props:o,className:t,style:V,classes:Ce,classNames:u,styles:b,unstyled:p});return s.jsx($,{...k("root"),ref:R,__vars:{"--label-fz":Pe(y),"--label-lh":ee(y,"label-lh")},mod:[{"label-position":j},N],variant:M,size:y,...P,children:s.jsxs($,{component:x,htmlFor:x==="label"?I:void 0,...k("body"),children:[i,s.jsxs("div",{...k("labelWrapper"),"data-disabled":m||void 0,children:[c&&s.jsx($,{component:v,htmlFor:v==="label"?I:void 0,...k("label"),"data-disabled":m||void 0,children:c}),C&&s.jsx(H.Description,{size:y,__inheritStyles:!1,...k("description"),children:C}),B&&typeof B!="boolean"&&s.jsx(H.Error,{size:y,__inheritStyles:!1,...k("error"),children:B})]})]})})});ye.displayName="@mantine/core/InlineInput";const ke=f.createContext(null),Je=ke.Provider,ve=()=>f.useContext(ke),[Ke,Qe]=Re();var ge={card:"m_26775b0a"};const Xe={withBorder:!0},Ye=oe((e,{radius:o})=>({card:{"--card-radius":se(o)}})),re=Q((e,o)=>{const t=X("CheckboxCard",Xe,e),{classNames:u,className:b,style:p,styles:i,unstyled:c,vars:C,checked:I,mod:m,withBorder:B,value:y,onClick:j,defaultChecked:x,onChange:v,...M}=t,V=K({name:"CheckboxCard",classes:ge,props:t,className:b,style:p,classNames:u,styles:i,unstyled:c,vars:C,varsResolver:Ye,rootSelector:"card"}),S=ve(),N=typeof I=="boolean"?I:S?S.value.includes(y||""):void 0,[P,R]=be({value:N,defaultValue:x,finalValue:!1,onChange:v});return s.jsx(Ke,{value:{checked:P},children:s.jsx(we,{ref:o,mod:[{"with-border":B,checked:P},m],...V("card"),...M,role:"checkbox","aria-checked":P,onClick:k=>{j==null||j(k),S==null||S.onChange(y||""),R(!P)}})})});re.displayName="@mantine/core/CheckboxCard";re.classes=ge;function Ze({children:e,role:o}){const t=Ie();return t?s.jsx("div",{role:o,"aria-labelledby":t.labelId,"aria-describedby":t.describedBy,children:e}):s.jsx(s.Fragment,{children:e})}const eo={},ae=Q((e,o)=>{const{value:t,defaultValue:u,onChange:b,size:p,wrapperProps:i,children:c,readOnly:C,...I}=X("CheckboxGroup",eo,e),[m,B]=be({value:t,defaultValue:u,finalValue:[],onChange:b}),y=j=>{const x=typeof j=="string"?j:j.currentTarget.value;!C&&B(m.includes(x)?m.filter(v=>v!==x):[...m,x])};return s.jsx(Je,{value:{value:m,onChange:y,size:p},children:s.jsx(H.Wrapper,{size:p,ref:o,...i,...I,labelElement:"div",__staticSelector:"CheckboxGroup",children:s.jsx(Ze,{role:"group",children:c})})})});ae.classes=H.Wrapper.classes;ae.displayName="@mantine/core/CheckboxGroup";var _e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const oo={icon:me},so=oe((e,{radius:o,color:t,size:u,iconColor:b,variant:p,autoContrast:i})=>{const c=Z({color:t||e.primaryColor,theme:e}),C=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{indicator:{"--checkbox-size":ee(u,"checkbox-size"),"--checkbox-radius":o===void 0?void 0:se(o),"--checkbox-color":p==="outline"?C:J(t,e),"--checkbox-icon-color":b?J(b,e):xe(i,e)?te({color:t,theme:e,autoContrast:i}):void 0}}}),ne=Q((e,o)=>{const t=X("CheckboxIndicator",oo,e),{classNames:u,className:b,style:p,styles:i,unstyled:c,vars:C,icon:I,indeterminate:m,radius:B,color:y,iconColor:j,autoContrast:x,checked:v,mod:M,variant:V,disabled:S,...N}=t,P=I,R=K({name:"CheckboxIndicator",classes:_e,props:t,className:b,style:p,classNames:u,styles:i,unstyled:c,vars:C,varsResolver:so,rootSelector:"indicator"}),k=Qe(),z=typeof v=="boolean"||typeof m=="boolean"?v||m:(k==null?void 0:k.checked)||!1;return s.jsx($,{ref:o,...R("indicator",{variant:V}),variant:V,mod:[{checked:z,disabled:S},M],...N,children:s.jsx(P,{indeterminate:m,...R("icon")})})});ne.displayName="@mantine/core/CheckboxIndicator";ne.classes=_e;var je={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const to={labelPosition:"right",icon:me},ro=oe((e,{radius:o,color:t,size:u,iconColor:b,variant:p,autoContrast:i})=>{const c=Z({color:t||e.primaryColor,theme:e}),C=c.isThemeColor&&c.shade===void 0?`var(--mantine-color-${c.color}-outline)`:c.color;return{root:{"--checkbox-size":ee(u,"checkbox-size"),"--checkbox-radius":o===void 0?void 0:se(o),"--checkbox-color":p==="outline"?C:J(t,e),"--checkbox-icon-color":b?J(b,e):xe(i,e)?te({color:t,theme:e,autoContrast:i}):void 0}}}),O=Q((e,o)=>{const t=X("Checkbox",to,e),{classNames:u,className:b,style:p,styles:i,unstyled:c,vars:C,color:I,label:m,id:B,size:y,radius:j,wrapperProps:x,checked:v,labelPosition:M,description:V,error:S,disabled:N,variant:P,indeterminate:R,icon:k,rootRef:z,iconColor:ce,onChange:F,autoContrast:le,mod:r,...a}=t,l=ve(),A=y||(l==null?void 0:l.size),g=k,_=K({name:"Checkbox",props:t,classes:je,className:b,style:p,classNames:u,styles:i,unstyled:c,vars:C,varsResolver:ro}),{styleProps:E,rest:n}=Be(a),d=Ne(B),T=l?{checked:l.value.includes(n.value),onChange:h=>{l.onChange(h),F==null||F(h)}}:{},G=f.useRef(null),W=o||G;return f.useEffect(()=>{W&&"current"in W&&W.current&&(W.current.indeterminate=R||!1)},[R,W]),s.jsx(ye,{..._("root"),__staticSelector:"Checkbox",__stylesApiProps:t,id:d,size:A,labelPosition:M,label:m,description:V,error:S,disabled:N,classNames:u,styles:i,unstyled:c,"data-checked":T.checked||v||void 0,variant:P,ref:z,mod:r,...E,...x,children:s.jsxs($,{..._("inner"),mod:{"data-label-position":M},children:[s.jsx($,{component:"input",id:d,ref:W,checked:v,disabled:N,mod:{error:!!S,indeterminate:R},..._("input",{focusable:!0,variant:P}),onChange:F,...n,...T,type:"checkbox"}),s.jsx(g,{indeterminate:R,..._("icon")})]})})});O.classes={...je,...He};O.displayName="@mantine/core/Checkbox";O.Group=ae;O.Indicator=ne;O.Card=re;function ao(e){return new Worker("/assets/worker-jl-jpcPe.js",{name:e==null?void 0:e.name})}const no=()=>{const e=Te(),[o,t]=f.useState(0),[u,b]=f.useState(Array(q.length).fill(!1)),[p,i]=f.useState(!1),[c,C]=f.useState(null),[I,m]=f.useState(null),[B,y]=f.useState(null),j=f.useRef(null),x=f.useRef(null),v=f.useMemo(()=>Ee(),[]),[M,V]=f.useState(0),[S,N]=f.useState(),P=f.useMemo(()=>o>=0?Me(D[o].mask):[],[o]),R=f.useCallback((r,a,l,A,g)=>{var E;(E=x.current)==null||E.terminate();const _=new ao;x.current=_,_.onmessage=n=>{i(!1);const d=n.data;if(d.type==="result"&&Array.isArray(d.path)){const T=[...g,...d.path],G=Ve(D[o].mask,r,T);z(G)}else d.type==="error"&&console.error("Search error:",d.message)},_.onerror=n=>{i(!1),N(n.message)},_.postMessage({type:"start",targetMask:r,baseMask:a,singleDist:l,pairDist:A})},[]),k=f.useCallback(()=>{var E;if(o<0)return;(E=j.current)==null||E.abort();const r=u.map((n,d)=>n?ue[q[d]]:-1).filter(n=>n>=0),a=r.reduce((n,d)=>n|L[d],0n);let l=D[o].mask;if((l&a)===a){z([]);return}const A=Ae(a,l);if(A){z(A),setTimeout(async()=>{try{const n=await ze(a,l);n&&n.length<A.length&&z(n)}catch{}},0);return}const g=[],_=r.filter(n=>v[n].length===1);for(const n of _){const d=L[n],T=de(d,l);if(T)for(const G of T)l=fe(l,U[G]),g.push(G)}C(null),m(null),y(null),N(null),i(!0),(async()=>{const n=r.filter(h=>!_.includes(h)),d=n.length,T=Array.from({length:d},()=>Array(d).fill(1/0));for(let h=0;h<d;h++)for(let w=h+1;w<d;w++)T[h][w]=await Ge(l,ie=>(ie&L[n[h]])!==0n&&(ie&L[n[w]])!==0n),T[w][h]=T[h][w];const G=q.length,W=Array.from({length:G},()=>Array(G).fill(1/0));for(let h=0;h<d;h++)for(let w=0;w<d;w++)W[n[h]][n[w]]=T[h][w];R(a,l,P,W,g),r.length>=7&&setTimeout(()=>{var w;const h=de(a,l);if(h===null){(w=x.current)==null||w.terminate(),i(!1),N("Combination cannot be achieved.");return}z(h)},1)})()},[o,u,P,v,R]),z=f.useCallback(r=>{C(r.map(g=>U[g].name)),V(r.reduce((g,_,E)=>g+U[_].cost,0));let a=D[o].mask;for(const g of r)a=fe(a,U[g]);const l=[];let A=0;q.forEach((g,_)=>{const E=ue[g];(a&L[E])!==0n&&(l.push(g),A+=Le[E])}),m(l),y(D[o].baseValue*(1+A))},[o]),ce=f.useCallback(()=>{var r,a,l;(r=j.current)==null||r.abort(),(a=x.current)==null||a.postMessage({type:"cancel"}),(l=x.current)==null||l.terminate(),x.current=null,i(!1)},[]),F=r=>{const a=[...u];a[r]=!a[r],a.filter(Boolean).length<=8&&b(a)},le=()=>{confirm("Are you sure you want to reset?")&&(t(0),m(null),y(null),b(r=>Array(r.length).fill(!1)))};return s.jsx(We,{size:"sm",py:"md",children:s.jsxs($e,{gap:"md",children:[s.jsxs(Fe,{order:3,fw:"bold",children:["Reverse Mix Finder",s.jsx(Y,{variant:"outline",style:{float:"right"},onClick:le,children:"Reset"})]}),s.jsx(De,{label:"Base",placeholder:"Select base",data:D.map((r,a)=>({value:a.toString(),label:r.name})),value:o>=0?o.toString():null,onChange:(r,a)=>{t(+a.value)},clearable:!0}),o>=0&&s.jsxs(s.Fragment,{children:[s.jsx(pe,{children:"Select up to 8 properties"}),s.jsx($,{style:{columnCount:4,columnGap:"1rem"},children:[...q].map((r,a)=>s.jsx(O,{label:Oe(r),checked:u[a],onChange:()=>F(a),color:he(r),style:{display:"block",whiteSpace:"nowrap",marginBottom:".5rem",color:he(r)}},r))})]}),s.jsx(Y,{onClick:k,disabled:o<0||p,loading:p,children:"Find Mix"}),s.jsxs("div",{children:[u.filter(Boolean).length>=4&&s.jsx("span",{children:"Warning: Complex searches can take a long time!"}),S&&s.jsx(pe,{style:{color:e.colors.red[8]},children:S}),p&&s.jsx(Y,{variant:"outline",onClick:ce,disabled:!p,ml:"sm",style:{float:"right"},children:"Cancel"})]}),c&&I&&!p&&s.jsx(qe,{cost:M,resultProps:I,seqNames:c,totalValue:B})]})})},co={navLabel:"Reverse Calculator",navPath:"/reverse"},lo=Ue(function({loaderData:o}){return s.jsx(no,{})}),po=Object.freeze(Object.defineProperty({__proto__:null,default:lo,handle:co},Symbol.toStringTag,{value:"Module"}));export{po as _,fo as g,co as h,lo as r};
